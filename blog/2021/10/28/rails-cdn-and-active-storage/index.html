<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Rails CDN and ActiveStorage | boehs.com</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://boehs.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://boehs.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://boehs.com/blog/2021/10/28/rails-cdn-and-active-storage"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Rails CDN and ActiveStorage | boehs.com"><meta data-rh="true" name="description" content="When serving assets and attachments from Rails and ActiveStorage, a CDN is a great way to reduce load on your web server and speed up content delivery to your users."><meta data-rh="true" property="og:description" content="When serving assets and attachments from Rails and ActiveStorage, a CDN is a great way to reduce load on your web server and speed up content delivery to your users."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-10-28T00:00:00.000Z"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://boehs.com/blog/2021/10/28/rails-cdn-and-active-storage"><link data-rh="true" rel="alternate" href="https://boehs.com/blog/2021/10/28/rails-cdn-and-active-storage" hreflang="en"><link data-rh="true" rel="alternate" href="https://boehs.com/blog/2021/10/28/rails-cdn-and-active-storage" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="boehs.com RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="boehs.com Atom Feed"><link rel="stylesheet" href="/assets/css/styles.694d4f5e.css">
<link rel="preload" href="/assets/js/runtime~main.d5767009.js" as="script">
<link rel="preload" href="/assets/js/main.38f93a46.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">boehs.com</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/blog/archive">Archive</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ericboehs/boehs.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/2021/10/28/rails-cdn-and-active-storage">Rails CDN and ActiveStorage</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/10/24/macbook-pro-battery-drain">MacBook Pro Battery Drain</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/10/23/ping-tools-in-macos">Ping Tools in macOS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/09/07/instant-google-results-in-alfred">Instant Google Results in Alfred</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/09/06/monitoring-my-internet-connection-with-speedtest-cli">Monitoring my Internet Connection with Speedtest-cli</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">Rails CDN and ActiveStorage</h1><div class="container_mt6G margin-vert--md"><time datetime="2021-10-28T00:00:00.000Z" itemprop="datePublished">October 28, 2021</time> · <!-- -->4 min read</div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>When serving assets and attachments from Rails and ActiveStorage, a CDN is a great way to reduce load on your web server and speed up content delivery to your users.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="asset-cdn">Asset CDN<a href="#asset-cdn" class="hash-link" aria-label="Direct link to Asset CDN" title="Direct link to Asset CDN">​</a></h2><p>First, even if you&#x27;re not using ActiveStorage, you&#x27;ll want to set up a CDN to stand in front of your app. This will proxy requests for images, fonts, javascripts, and stylesheets that live in your app&#x27;s repository.</p><p>The ideal setup here is to serve your assets from your app, set a high cache-expiration, and serve your assets through a CDN.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-your-asset-cdn">Setting up your Asset CDN<a href="#setting-up-your-asset-cdn" class="hash-link" aria-label="Direct link to Setting up your Asset CDN" title="Direct link to Setting up your Asset CDN">​</a></h3><p>For a CDN, I recommend Amazon CloudFront. You&#x27;ll want to create a web distribution which points at the root of your app. Heroku <a href="https://help.heroku.com/8JTD2TJ6/how-should-i-configure-cloudfront-to-work-with-heroku" target="_blank" rel="noopener noreferrer">has a good guide</a> on that.</p><p>Once it&#x27;s set up, set an environment variable<sup id="fnref-1-6af4a5"><a href="#fn-1-6af4a5" class="footnote-ref">1</a></sup> (e.g. <code>ASSET_HOST</code>) to the distribution domain name and configure your <code>asset_host</code>. Also, set a long expiration for your assets. In <code>config/environments/production.rb</code> <sup id="fnref-2-6af4a5"><a href="#fn-2-6af4a5" class="footnote-ref">2</a></sup> <sup id="fnref-3-6af4a5"><a href="#fn-3-6af4a5" class="footnote-ref">3</a></sup>:</p><div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Tell our CDN and browser to cache assets for a year.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">public_file_server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">headers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&#x27;Cache-Control&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&#x27;public, max-age=31536000&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Serve images, stylesheets, and javascripts from an asset server.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">action_controller</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">asset_host </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ENV</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">&#x27;ASSET_HOST&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you&#x27;ve configured the above, your production assets should serve from your CloudFront CDN.</p><p>For more information, on serving assets, caching, and cache invalidation, see the <a href="https://guides.rubyonrails.org/asset_pipeline.html#cdns-and-the-cache-control-header" target="_blank" rel="noopener noreferrer">Rails Guides</a>.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="activestorage-attachments-served-through-a-cdn">ActiveStorage Attachments served through a CDN<a href="#activestorage-attachments-served-through-a-cdn" class="hash-link" aria-label="Direct link to ActiveStorage Attachments served through a CDN" title="Direct link to ActiveStorage Attachments served through a CDN">​</a></h2><p>When you serve attachments from a cloud storage service (I&#x27;m using S3), it will be coming from a different domain than your app. One solution to this would be to <a href="https://github.com/rails/rails/issues/31419#issuecomment-399118697" target="_blank" rel="noopener noreferrer" title="on Jun 21, 2018">stream the file contents through your app</a>.</p><p>I opted for creating a second CDN distribution that sits in front of the cloud storage provider that ActiveStorage serves for its 302 redirect <sup id="fnref-4-6af4a5"><a href="#fn-4-6af4a5" class="footnote-ref">4</a></sup>. This does require a little configuration. Thankfully nothing needs to be monkey patched.</p><ol><li><p>Create a second CloudFront web distribution that points to your S3 bucket and point your <code>ATTACHMENT_HOST</code> env variable at it (prepended with https://).</p></li><li><p>In <code>lib/active_storage/service/s3_directory_service.rb</code>, create the service in <a href="https://gist.github.com/ericboehs/59ff72b7beeb2724a0979247d0fe7541" target="_blank" rel="noopener noreferrer">this gist</a>.</p></li><li><p>In <code>config/environment/production.rb</code>, set ActiveStorage&#x27;s <code>service_urls_expire_in</code> :</p><div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Tell our CDN and browser to cache attachments for a year.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">active_storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service_urls_expire_in </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token plain">year</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>In config/storage.yml, configure the service and default <code>cache_control</code> for uploaded attachments <a href="https://stackoverflow.com/a/58290203" target="_blank" rel="noopener noreferrer">by adding the upload key</a> <sup id="fnref-5-6af4a5"><a href="#fn-5-6af4a5" class="footnote-ref">5</a></sup>:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">amazon</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> S3Directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">upload</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">cache_control</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;public, max-age=31536000&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>When linking to the attachments, use the <code>rails_blob_url</code> helper like so: <sup id="fnref-6-6af4a5"><a href="#fn-6-6af4a5" class="footnote-ref">6</a></sup> </p><div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rails_blob_url user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">avatar</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token symbol" style="color:#36acaa">host</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ENV</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">&#x27;ASSET_HOST&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>(For variants, you&#x27;ll need to call <code>rails_representation_url</code> instead.)</p></li></ol><p>Now your ActiveStorage attachments will serve through the two CDNs: the first request will hit Rails&#x27; Representations or Blob controller (through the Asset CDN) which will redirect to the service url for the attachment (through the Attachment CDN). If this attachment has been served to a previous user, no request will hit your web server as CloudFront will have it in its cache. If that user has requested the attachment before, it well be served from the browser&#x27;s memory and no request will be made.<sup id="fnref-7-6af4a5"><a href="#fn-7-6af4a5" class="footnote-ref">7</a></sup></p><div class="footnotes"><hr><ol><li id="fn-1-6af4a5">Prepend the host with https://.<a href="#fnref-1-6af4a5" class="footnote-backref">↩</a></li><li id="fn-2-6af4a5">If you&#x27;re using Heroku Review Apps, you&#x27;ll want to conditionally use <code>ENV[&#x27;HEROKU_APP_NAME&#x27;]</code> based on <code>ENV[&#x27;HEROKU_PARENT_APP_NAME&#x27;]</code>.<a href="#fnref-2-6af4a5" class="footnote-backref">↩</a></li><li id="fn-3-6af4a5">You may also want to <a href="https://guides.rubyonrails.org/action_mailer_basics.html#adding-images-in-action-mailer-views" target="_blank" rel="noopener noreferrer">set your mailers&#x27; asset host</a>.<a href="#fnref-3-6af4a5" class="footnote-backref">↩</a></li><li id="fn-4-6af4a5">See Rails&#x27; Representation and Variants controller to see how that works.<a href="#fnref-4-6af4a5" class="footnote-backref">↩</a></li><li id="fn-5-6af4a5">If you already have ActiveStorage attachments uploaded in production, you can make them public and add a cache-control header <a href="https://stackoverflow.com/a/30225271" target="_blank" rel="noopener noreferrer">by using aws cli tools</a>.<a href="#fnref-5-6af4a5" class="footnote-backref">↩</a></li><li id="fn-6-6af4a5">You may want to create a helper method to make this a little cleaner.<a href="#fnref-6-6af4a5" class="footnote-backref">↩</a></li><li id="fn-7-6af4a5">The same is true for your assets and the Asset CDN.<a href="#fnref-7-6af4a5" class="footnote-backref">↩</a></li></ol></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2021/10/24/macbook-pro-battery-drain"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">MacBook Pro Battery Drain</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#asset-cdn" class="table-of-contents__link toc-highlight">Asset CDN</a><ul><li><a href="#setting-up-your-asset-cdn" class="table-of-contents__link toc-highlight">Setting up your Asset CDN</a></li></ul></li><li><a href="#activestorage-attachments-served-through-a-cdn" class="table-of-contents__link toc-highlight">ActiveStorage Attachments served through a CDN</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/ericboehs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:ericATthisdomain" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/ericboehs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gist.github.com/ericboehs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gists<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/assets/js/runtime~main.d5767009.js"></script>
<script src="/assets/js/main.38f93a46.js"></script>
</body>
</html>